<!DOCTYPE html>
<html>

    <body>
        <div class="file-selection-container">
            <div class="file-selecter">
                
                    
                        <legend>Fillllllll Selection</legend>
                            <h1>Select File:</h1>
                            <label>
                            <input type="file" id="file" name ="file"/>
                            </label>
                            <h1>Enter Name of Company</h1>
                            <input type="text"  id="companyName" name="companyName"/>
                            <h1>Enter Department name</h1>
                            <input type="text" id="dptName" name ="dptName">
                            <br><br>
                            <button type="button" id="btn"  name="btn" onclick="uploadFile()"/>
                                 
                
            </div>
        </div>

        <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.3.1/init.js"></script>
       
        
        
        <script>
        // Initialize Firebase
        var config = {
            apiKey: "AIzaSyBeUP6UMYdTGdGueNbdQWTyc0EbSY93llo",
            authDomain: "chat2brandbroadcastlist.firebaseapp.com",
            databaseURL: "https://chat2brandbroadcastlist.firebaseio.com",
            projectId: "chat2brandbroadcastlist",
            storageBucket: "chat2brandbroadcastlist.appspot.com",
            messagingSenderId: "265863737153"
        };
        firebase.initializeApp(config);

        var uploadbtn= document.getElementById("btn");
        var filebtn=document.getElementById("file");

        //listen for file selection

        filebtn.addEventListener('change',function(e){

            //get file 
            var file =e.target.files[0];

            //ref
            var storageReference= firebase.storage.ref("chat2brand/"+ file.name);

            //upload
            var task= storageReference.put(file);

           // task.on('state_changed',

               // function progress(snapshot){
                   // var percentage=(snapshot.bytesTransferred/snapshot.totalBytes)*100;
                   // uploadbtn.value=percentage;
               // },

                //function error(err){

               // },

               // function complete(){

               // }
            
           // );

        });
        </script>
       <script> 
//save selected file 
//$("#file").on("change",function(event){
  //  selectedFile=event.target.files[0];
   // $("#uploadButton").show();
 //});

//uploadfile
function uploadFile(){
    var filename =selectedFile.name;
    var storageRef=firebase.storage().ref().child('/Chat2Brand/'+file.name);
    var uploadTask=storageRef.put(file);
    uploadTask
    .then(function(snapshot){
        console.log("Upload Task complete. URL: "+url);
    })
    //.then(snapshot => snapshot.ref.getDownloadURL())
  //.then((url) => {
    //console.log(url);
   // document.querySelector('#someImageTagID').src = url;
  //})
  .catch(console.error);

}
        </script>

        <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-messaging.js"></script>
        <script src="https://www.gstatic.com/firebasejs/5.3.0/firebase-functions.js"></script>

        <script src="action.js"></script>



    </body>

   
</html>